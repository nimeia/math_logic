

思路跟你前面数字数列一样：

* 按 **简单 L1 / 中等 L2 / 困难 L3**
* 每档给出若干 **模板ID + 图形结构 + 数字关系 + 随机参数**
* 明确：**起始数字 / 参数要随机**，避免孩子背题而不是学规律。

> 说明：
>
> * 我用 `(r,c)` 表示表格的行列：`r1`=第一行，`c1`=第一列。
> * 十字/圆/三角的点，用 `U,D,L,R,C`（上、下、左、右、中心），`T,L,R`（顶、左下、右下）。
> * 示例只是示意，实际出题时要按规则随机生成。

---

## 一、简单难度（L1）模板表

> 特征：图形简单（小表格 / 小十字 / 小三角），只用 **加减** 一步运算，只有 **1 个空格**。

### L1-1：横向三格相加（线型）

* **图形结构**：一行 3 个方格 `[ (r1,c1), (r1,c2), (r1,c3) ]`
* **规律**：右格 = 左格 + 中格

  * `val(r1,c3) = val(r1,c1) + val(r1,c2)`
* **参数与生成**：

  * 随机 `a ∈ [1,20]`，`b ∈ [1,20]`，设：

    * `r1,c1 = a`
    * `r1,c2 = b`
    * `r1,c3 = a + b`
* **出题形式**：

  * 常用：挖空右格 `(r1,c3)`
* **随机化建议**：

  * 每次随机 `a,b`；
  * 可以偶尔挖中间格 `(r1,c2)`，让孩子用减法反推。
* **示例**：`[ 7 , 5 , ( ? ) ]` → 12

---

### L1-2：纵向三格相加（线型）

* **图形结构**：一列 3 个方格 `[ (r1,c1); (r2,c1); (r3,c1) ]`
* **规律**：下格 = 上格 + 中格

  * `val(r3,c1) = val(r1,c1) + val(r2,c1)`
* **参数与生成**：

  * 随机 `a,b ∈ [1,20]`，`r1,c1=a, r2,c1=b, r3,c1=a+b`
* **出题形式**：

  * 缺 `r3,c1`，也可以偶尔缺 `r2,c1`。
* **示例**：

  * 上：4，中：9，下：? → 13

---

### L1-3：2×2 表格，右下是“行和”

* **图形结构**：

  | (r1,c1) | (r1,c2) |
  | ------- | ------- |
  | (r2,c1) | (r2,c2) |

* **规律**：右下 = 左上 + 右上

  * `val(r2,c2) = val(r1,c1) + val(r1,c2)`

* **参数与生成**：

  * 随机 `a,b ∈ [1,20]`：

    * `r1,c1=a, r1,c2=b, r2,c2=a+b`
    * `r2,c1` 可随机放一个干扰数 `d ∈ [1,20]`

* **出题形式**：

  * 缺 `r2,c2`。

* **随机化建议**：

  * 每题随机 `a,b,d`；
  * 偶尔改为：右下 = 上两格之和；左下随机。

* **示例**：

  | 4 | 7 |      |
  | - | - | ---- |
  | 9 | ? | → 11 |

---

### L1-4：十字结构：中心 = 左 + 右

* **图形结构**：十字 5 点：`L, R, U, D, C`
* **规律**：中心 = 左 + 右

  * `val(C) = val(L) + val(R)`
  * 上、下可放干扰数
* **参数与生成**：

  * 随机 `a,b ∈ [1,20]`：

    * `L=a, R=b, C=a+b`
    * `U,D` 各自随机小数 `[1,20]`
* **出题形式**：

  * 缺 `C`。
* **随机化建议**：

  * 每题随机 `a,b,U,D`；
  * 偶尔改成“中心 = 上 + 下”也可以变成另一个模板（L1-4b）。
* **示例**：

  * 左 5，右 8，中 ? → 13

---

### L1-5：三角形中心 = 顶点 + 左下

* **图形结构**：

  * 顶点 `T`，左下 `L`，右下 `R`，中心 `C`（在三角内部）
* **规律**：中心 = 顶点 + 左下

  * `val(C) = val(T) + val(L)`
  * 右下 `R` 可随机干扰
* **参数与生成**：

  * 随机 `t,l ∈ [1,20]`：

    * `T=t, L=l, C=t+l`
    * `R` 随机干扰数 `[1,20]`
* **出题形式**：

  * 缺 `C`。
* **示例**：

  * 顶 6，左下 7，右下 3，中 ? → 13

---

### L1-6：十字中心 = 上 + 下

* **图形结构**：`U, D, L, R, C`
* **规律**：中心 = 上 + 下

  * `C = U + D`
* **参数与生成**：

  * 随机 `u,d ∈ [1,20]`，`C=u+d`；
  * 左右 `L,R` 随机干扰
* **出题形式**：

  * 缺 `C`（或偶尔缺 U/D）。
* **示例**：

  * U=4, D=9, C=? → 13

---

## 二、中等难度（L2）模板表

> 特征：出现 **3×3 表格 / 中心 = 四周组合 / 行列共同约束 / 简单封闭边和**。
> 运算引入 **乘法 / 两步运算**，但逻辑仍然干净。

### L2-1：3×3 表格，行规则：右 = 左 + 中

* **图形结构**：3×3 表格 `a11..a33`：`a_rc = (r,c)`
* **规律**：每一行：右 = 左 + 中

  * 对行 r=1..3：

    * `val(r,c3) = val(r,c1) + val(r,c2)`
* **参数与生成**：

  * 对每一行 r：

    * 随机 `x,y ∈ [1,50]`，`(r,c1)=x,(r,c2)=y,(r,c3)=x+y`
* **出题形式**：

  * 一般缺某一行的 `c3`；
  * 也可缺中间格（需要反推）。
* **随机化建议**：

  * 每行参数独立随机；
  * 随机选择哪一行挖空，提高多样。
* **示例**：

  | 3 | 5 | 8  |      |
  | - | - | -- | ---- |
  | 7 | 4 | 11 |      |
  | 6 | 9 | ?  | → 15 |

---

### L2-2：3×3 表格，列规则：下 = 上 + 中

* **图形结构**：同上
* **规律**：每一列：下 = 上 + 中

  * 对列 c=1..3：

    * `val(r3,c) = val(r1,c) + val(r2,c)`
* **参数与生成**：

  * 对每列 c：

    * 随机 `u,v ∈ [1,50]`，`(r1,c)=u,(r2,c)=v,(r3,c)=u+v`
* **出题形式**：

  * 缺某列的 `r3,c`。
* **示例**：

  | 4 | 7 | 9  |          |
  | - | - | -- | -------- |
  | 5 | 2 | 6  |          |
  | 9 | ? | 15 | → 9+2=11 |

---

### L2-3：3×3 表格，行列组合（行求和 + 列求和）

* **图形结构**：3×3
* **规律**：

  * 第3列是**行和**：`a(r,3) = a(r,1) + a(r,2)`
  * 第3行是**列和**：`a(3,c) = a(1,c) + a(2,c)`
* **参数与生成（简单方案）**：

  * 随机生成 `a(1,1), a(1,2), a(2,1), a(2,2) ∈ [1,30]`；
  * 计算：

    * 行和：`a(1,3)=a(1,1)+a(1,2)`，`a(2,3)=a(2,1)+a(2,2)`
    * 列和：`a(3,1)=a(1,1)+a(2,1)`，`a(3,2)=a(1,2)+a(2,2)`
    * 右下 `a(3,3)` 可设为 `a(1,3)+a(2,3)` 或 `a(3,1)+a(3,2)`（保持一致）
* **出题形式**：

  * 缺右下角 `a(3,3)`，孩子需要同时用行/列信息来理解结构。
* **示例**（仅示意）：

  | 3 | 4 | 7 |                   |
  | - | - | - | ----------------- |
  | 5 | 1 | 6 |                   |
  | 8 | 5 | ? | → 7+6=13 或 8+5=13 |

---

### L2-4：十字中心 = 四周之和

* **图形结构**：十字 `U,D,L,R,C`
* **规律**：中心 = 上 + 下 + 左 + 右

  * `C = U + D + L + R`
* **参数与生成**：

  * 随机 `U,D,L,R ∈ [1,40]`，`C` 由它们之和得到
* **出题形式**：

  * 缺中心 `C`；
  * 中等尾段可少量出“给中心和3个方向，求第4个方向”。
* **示例**：

  * 上 3, 下 7, 左 5, 右 2, 中 ? → 17

---

### L2-5：十字中心 = 两数乘积 + 两数和

* **图形结构**：十字 `U,D,L,R,C`
* **规律**（固定一种模板）：

  * 中心 = 上×下 + 左 + 右
  * `C = U * D + L + R`
* **参数与生成**：

  * 随机：

    * `U,D ∈ [1,5]`（避免乘积太大）
    * `L,R ∈ [1,20]`
    * `C = U*D + L + R`（若 >200，可重抽）
* **出题形式**：

  * 缺中心 `C`。
* **示例**：

  * U=2, D=4, L=3, R=5 → C = 2×4+3+5 = 16

---

### L2-6：三角形封闭边和（弱版魔术三角）

* **图形结构**：等边三角形 3 条边，每边 2 个位置（顶点 + 边中点），共 6 个数：

  * 顶点：A(顶)、B(右下)、C(左下)
  * 边中点：D(AB 中点)、E(BC 中点)、F(CA 中点)
* **规律**：每条边上的两个数 + 顶点之和相等

  * 边 AB：`A + D + B = S`
  * 边 BC：`B + E + C = S`
  * 边 CA：`C + F + A = S`
* **参数与生成（一个可行方案）**：

  * 选 `A,B,C ∈ [1,20]`；
  * 随机选边和 `S`，使得 `S > A+B`、`S > B+C`、`S > C+A`；
  * 计算：

    * `D = S - A - B`
    * `E = S - B - C`
    * `F = S - C - A`
  * 若某个 D/E/F ≤0，则重选参数。
* **出题形式**：

  * 只缺 **一个中点**（如 D），让孩子用“某一条边的和 = 另一条边的和”的想法。
* **示例**（示意）：

  * 若 A=3,B=4,C=5,S=12，则：

    * D=12-3-4=5
    * E=12-4-5=3
    * F=12-5-3=4
  * 画图后：

    * 顶点 A=3, B=4, C=5,
    * 中点 D=?, E=3, F=4

---

## 三、困难难度（L3）模板表

> 特征：**幻方 / 真魔术三角 / 多圆组合 / 复合约束**。
> 一题可能需要 **多步推理**，使用多条边 & 行列约束。

### L3-1：3×3 幻方（Lo Shu 变换）

* **图形结构**：3×3 表格
* **规律**：行、列、对角线和都相等
* **实现技巧**：用**固定幻方 + 线性变换**来保证正确性和随机性：

  * 固定基础矩阵 `M0`（Lo Shu）：

    * [8 1 6; 3 5 7; 4 9 2]
  * 随机选 `k ∈ {1,2,3}`，`c ∈ {0,1,2,3}`
  * 定义最终格 `val(r,c) = k * M0(r,c) + c`
* **参数与生成**：

  * 按上式计算出 9 个格子值
* **出题形式**：

  * 随机挖空 1 个或 2 个格子（L3 建议先从 1 个开始）；
  * 题干告诉：**每行、每列、对角线数字和都相等**。
* **随机化建议**：

  * 每题随机 k,c 和挖空位置；
  * 这样孩子即使见到类似结构，数字组合也不同。

---

### L3-2：魔术三角形（每边和相等）

* **图形结构**：同 L2-6 的 6 个点：A,B,C,D,E,F
* **规律**：三边和相等（**真魔术三角**），和 L2-6 相同，但这次可以挖空两个点。
* **参数与生成**：

  * 同 L2-6 的生成方式（A,B,C,S → D,E,F），只要全部为正。
* **出题形式**：

  * 可以：

    * 已知 A,B,C 和一个中点，缺另一个中点；
    * 或已知一个顶点和两个中点，缺另一个顶点。
  * 总之设计成：需要用到**至少两条边**的和来反推。
* **难度点**：

  * 孩子要意识到“每条边和相等”，而不仅仅看一条边。

---

### L3-3：3×3 强化数阵：行列和统一 + 额外角约束

* **图形结构**：3×3 表格
* **规律示例**：

  1. 每一行和相等为 `S`
  2. 每一列和也等于 `S`
  3. 四个角的和 = 某常数（可由 S 推出）
* **参数与生成（示意思路）**：

  * 方法一：仍以 Lo Shu 幻方变换生成，再增加“角和”这个辅助条件（实际角和自然有固定值）。
  * 方法二：自己构造一个小矩阵，保证行列和相等，然后声明“角和 = 某值”。
* **出题形式**：

  * 可在角上挖空一个或两个数字，要求孩子用行列和 + 角和反推。
* **难度点**：

  * 孩子需要综合使用行、列和角的条件来算目标格。

---

### L3-4：双圆交集：每个圆上的和相等

* **图形结构**：两个相交的圆（类似“维恩图”），每个圆上有 3~4 个格子，其中**交集区域的格子同时属于两个圆**。

  * 圆1：格子 A, X, B
  * 圆2：格子 C, X, D
  * X 为交集数字
* **规律**：

  * 圆1和：`A + X + B = S1`
  * 圆2和：`C + X + D = S2`
  * 可能还给出 S1 = S2 或 S1、S2 各自固定。
* **参数与生成（方案之一）**：

  * 随机 `A,B,C,D,X` 小整数，先计算两圆和。
  * 或先设定 `S`，随机 A,B,X，令 `C,D` 由 `S - X - C` 之类的方程确定，保证所有为正。
* **出题形式**：

  * 常见：已知 A,B,C,D,S（或部分 S），缺 X。
  * 或已知 X 及三点，缺某一外围点。
* **难度点**：

  * 需要理解“交集 X 在两个等式中都出现”，用联立思维来解。

---

### L3-5：正方形 + 对角线（方形+X）

* **图形结构**：

  * 一个正方形四个角：A,B,C,D
  * 中心一点：E
  * 可能在四条边中点再放数（可视版本）
* **规律示例**：

  1. 对角和相等：`A + C = B + D`
  2. 中心 E = 四角和的一半：`E = (A + B + C + D)/4` 或其他简单线性关系
* **参数与生成**：

  * 随机 `A,B,C` 小整数；
  * 设 `D` 由 `A + C = B + D` 得出：`D = A + C - B`（保证 D>0）；
  * 计算 `E` =（A+B+C+D）/4，若不是整数，可重抽。
* **出题形式**：

  * 缺一个角或中心；
  * 要用到“对角线”和“整体平均”两条信息。

---

### L3-6：图形 + 数值双变化序列（多图组合）

* **图形结构**：一行 3 张或 4 张小图，每张图是一个简单结构（如十字或三角）。
* **规律**：同时包含：

  1. 图形结构在变化（例如：每一步多一个小方块 / 多一个小三角）
  2. 每张图中的数字亦按某规律随图形变化（比如：总和增加固定量；或每次乘2+1）
* **参数与生成（通用思路）**：

  * 定义一个简单的数列规则（例如：`S_(k+1) = S_k + d` 或 `S_(k+1)=2*S_k+1`），用来表示**第 k 张图中的总和**；
  * 对每张图，再在内部按某简单方式分配这些总和（例如中心数 + 周围数之和 = S_k）。
* **出题形式**：

  * 前 2~3 张图给出完整数字，最后一张图只给出部分数字或总和，问缺失值。
* **难度点**：

  * 先要识别“图像数量/结构的变化” → 对应到“总和变化”；
  * 再从总和拆回到图内部结构（中心/边的数字）。

---

## 四、统一的“随机化与反背题”原则（类型2）

同样可以在整体题目引擎上，加几条统一规则（跟类型1 一致）：

1. **使用模板 + 随机参数，而不是固定题库**

   * 每个模板都要至少有 **可变参数**（数字起点、加数、乘数、目标和等）。
   * 每次出题时，先随机生成参数，再按规则算出其余格子。

2. **限制数值范围 + 重抽**

   * 若出现负数、非整数或超过设定上限（比如 >1000），应重抽参数。

3. **随机挖空位置（在模板允许的范围内）**

   * 同一个模板中：可以随机决定是挖“中心”、某一行右格、某边中点等。
   * 这样即使参数重复，孩子也不能纯靠记忆。

4. **记录近期题目参数组合，避免频繁重复**

   * 可记录 `(模板ID, 参数集合, 挖空位置)` 的最近 N 道题，在生成新题时避免完全一样。


