
* 规律描述
* 参数与生成规则（方便你直接写代码）
* 出题形式
* 随机化建议（避免小孩背题）

> 约定：
>
> * 只用 **大写字母** A–Z
> * **固定映射：A=1, B=2, …, Z=26**
> * 用 `idx(X)` 表示字母 X 的位置编号；`chr(i)` 表示第 i 个字母（1→A，2→B…）

---

## 一、简单难度（L1）模板表

> 核心：**单一规律、一步推理**；
> 只在字母表上做 **+1 / -1 / 固定步长**，外加最基础的 A=1 映射。

### L1-1：连续字母 +1（缺最后一项）

| 字段      | 内容                                                                        |
| ------- | ------------------------------------------------------------------------- |
| 模板ID    | L1-1                                                                      |
| 规律描述    | 字母按字母表顺序依次 +1，缺最后一个字母                                                     |
| 参数与生成规则 | 选择长度 `L ∈ {4,5}`；随机起始位置 `s ∈ [1, 26-L+1]`；第 n 项字母：`chr(s + n - 1)`，n=1..L |
| 出题形式    | 展示前 L-1 个字母 + `?`，问最后一个字母                                                 |
| 随机化建议   | 每题随机 `L` 与 `s`；不要总从 A 开始；可以混合不同长度                                         |
| 示例（示意）  | 若 L=5, s=3 → C, D, E, F, ?  答：G                                           |

---

### L1-2：连续字母 -1（缺最后一项）

| 字段      | 内容                                                           |
| ------- | ------------------------------------------------------------ |
| 模板ID    | L1-2                                                         |
| 规律描述    | 字母按字母表逆序，每次 -1，缺最后一个字母                                       |
| 参数与生成规则 | 长度 `L ∈ {4,5}`；随机起始位置 `s ∈ [L, 26]`；第 n 项：`chr(s - (n - 1))` |
| 出题形式    | 展示前 L-1 项，最后一项为 `?`                                          |
| 随机化建议   | 随机 `s`，可以落在中间或接近 Z，不要总在 K、Z 固定点                              |
| 示例      | K, J, I, ? → H                                               |

---

### L1-3：等差字母序列（步长 = 2 或 3）

| 字段      | 内容                                                                                          |
| ------- | ------------------------------------------------------------------------------------------- |
| 模板ID    | L1-3                                                                                        |
| 规律描述    | 字母索引形成等差数列，步长固定为 2 或 3                                                                      |
| 参数与生成规则 | 选步长 `k ∈ {2,3}`；选长度 `L ∈ {4,5}`；随机起点 `s` 满足 `1 ≤ s ≤ 26 - (L-1)*k`；第 n 项：`chr(s + (n-1)*k)` |
| 出题形式    | 给前 L-1 项，缺最后一项；或给 L 项挖空中间 1 项                                                               |
| 随机化建议   | k=2、3 均要出现；起点 s 每次随机；可控制“中间缺项”的占比                                                           |
| 示例      | A, C, E, G, ? → I  （k=2）                                                                    |

---

### L1-4：两字母交替（ABAB 型）

| 字段      | 内容                                                                                      |
| ------- | --------------------------------------------------------------------------------------- |
| 模板ID    | L1-4                                                                                    |
| 规律描述    | 两个不同字母交替出现：L1, L2, L1, L2, …                                                            |
| 参数与生成规则 | 随机选择两个不同位置 `p≠q`，`p,q ∈ [1,26]`；设 `X=chr(p), Y=chr(q)`；长度 `L ∈ {5,6}`；第 n 项：奇数位 X，偶数位 Y |
| 出题形式    | 给出前 L-1 项，最后一项 `?`                                                                      |
| 随机化建议   | p,q 随机；不要总用 A/B；可以给 UI 加颜色区别两个字母                                                        |
| 示例      | P, Q, P, Q, P, ? → Q                                                                    |

---

### L1-5：数字 → 字母（A=1 简单映射）

| 字段      | 内容                                                                                                                  |
| ------- | ------------------------------------------------------------------------------------------------------------------- |
| 模板ID    | L1-5                                                                                                                |
| 规律描述    | 给出一串 **连续数字**（或简单等差数字），孩子需找出最后一个数字对应的字母                                                                             |
| 参数与生成规则 | 随机起始数字 `n0 ∈ [1,20]`，步长 `d ∈ {1,2}`，长度 `L=4` 或 `5`；第 n 个数字 = `n0 + (n-1)*d`；答案字母为第 L 个数字对应的 `chr(num)`（要求 num ≤ 26） |
| 出题形式    | 题面主要展示数字，如：`5, 6, 7, ?` 并句子提示：“这些数字对应字母为 E,F,G,接下来是？”                                                               |
| 随机化建议   | 确保所有数字 ≤26；`n0,d` 随机；用句子/提示说明 A=1 规则                                                                                |
| 示例      | `3, 4, 5, 6, ?` → 对应字母 C,D,E,F, 所以 ? 是 G                                                                            |

---

### L1-6：字母 → 数字（位置编号）

| 字段      | 内容                                                  |
| ------- | --------------------------------------------------- |
| 模板ID    | L1-6                                                |
| 规律描述    | 给出一串字母，按 A=1…Z=26 规律，问最后一个字母在字母表中的编号                |
| 参数与生成规则 | 直接复用 L1-1 / L1-3 的字母序列生成方式；对最后一个字母 `X`，答案为 `idx(X)` |
| 出题形式    | 如：“A, C, E, G, 最后一个字母是第几号？”                         |
| 随机化建议   | 起点、步长沿用已随机；只改变题干问法（答案是数字）                           |
| 示例      | A, C, E, G → G 是第 7 个，答案 7                          |

---

## 二、中等难度（L2）模板表

> 核心：字母 + 数字混合、**双序列 / 交替规律 / 固定位移（Caesar 类）**，需要 1–2 步推理。

### L2-1：等差字母（步长>1）且缺中间项

| 字段      | 内容                                                                            |
| ------- | ----------------------------------------------------------------------------- |
| 模板ID    | L2-1                                                                          |
| 规律描述    | 与 L1-3 相同的等差字母序列，但挖的是**中间某项**                                                 |
| 参数与生成规则 | 同 L1-3：步长 `k ∈ {2,3,4}`，长度 `L=5`；起点 `s` 满足索引不越界；随机选择中间位置 `pos ∈ {2,3,4}` 作为缺项 |
| 出题形式    | 如：`C, ?, G, I, K`                                                             |
| 随机化建议   | 随机起点/步长与缺项位置；长度尽量固定 5 方便 UI                                                   |
| 示例      | 起点 C (3), k=2：C, E, G, I, K → 若挖第2项：C, ?, G, I, K                             |

---

### L2-2：奇偶位双字母序列（两条等差）

| 字段      | 内容                                                                                                                                                                   |
| ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 模板ID    | L2-2                                                                                                                                                                 |
| 规律描述    | 奇数位是一条等差字母序列，偶数位是另一条等差字母序列                                                                                                                                           |
| 参数与生成规则 | 随机：奇数序列起点 `p1 ∈ [1,20]`，步长 `d1 ∈ {1,2}`；偶数起点 `p2 ∈ [1,20]`，步长 `d2 ∈ {1,2}` 且不同时为 0 或完全相同；长度 `L ∈ {6,7}`；奇数位：`chr(p1 + (k-1)*d1)`；偶数位：`chr(p2 + (k-1)*d2)`；保证所有索引 ≤26 |
| 出题形式    | 一般缺最后一项；或缺中间某奇/偶位置                                                                                                                                                   |
| 随机化建议   | 避免两条序列完全一样（否则退化为简单等差）；参数每题随机                                                                                                                                         |
| 示例      | 奇数：A,C,E；偶数：X,Y,Z → A, X, C, Y, E, Z, ?（奇数再下一项 G）                                                                                                                    |

---

### L2-3：字母 + 数字配对：双等差（L+1 / N+2 等）

| 字段      | 内容                                                                                                                                      |
| ------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| 模板ID    | L2-3                                                                                                                                    |
| 规律描述    | 每一项是“字母 + 数字”的组合：字母和数字各自按自己的等差规律变化                                                                                                      |
| 参数与生成规则 | 随机：字母起点 `p ∈ [1,20]`，字母步长 `dL ∈ {1,2}`；数字起点 `n0 ∈ [1,20]`，数字步长 `dN ∈ {1,2,3}`；长度 `L=4` 或 `5`；第 k 项是对 `(chr(p+(k-1)*dL), n0 + (k-1)*dN)` |
| 出题形式    | 如：“C3, D5, E7, F9, ?”；问下一个配对（字母+数字）或只问字母/只问数字                                                                                           |
| 随机化建议   | 参数随机；数字控制在合理范围（<100）；可在 UI 显示为卡片上的字母和角标数字                                                                                               |
| 示例      | 起点 C(3), dL=1; n0=3, dN=2 → C3, D5, E7, F9, G11                                                                                         |

---

### L2-4：固定位移编码（简单 Caesar：+k）

| 字段      | 内容                                                                                                             |
| ------- | -------------------------------------------------------------------------------------------------------------- |
| 模板ID    | L2-4                                                                                                           |
| 规律描述    | “密码字母” = “原字母”**向后移动 k 位**；k 是小常数                                                                              |
| 参数与生成规则 | 选择位移 `k ∈ {1,2,3}`；随机选择若干原字母 `X1,X2,X3`，其索引 `idx(Xi)` 满足 `idx(Xi)+k ≤26`（不做环绕，保证简单）；对应密文字母 `Yi=chr(idx(Xi)+k)` |
| 出题形式    | 形式1：给出一对对应关系 + 一个新原字母，问它的密文：如 `A→C, B→D, C→E, 那 D→?`；形式2：给出密文序列，要求填下一个密文：如 `密文：C,D,E,F,?`（本质是简单等差字母，但语义包装成编码）  |
| 随机化建议   | 每题随机 k 和原字母集合；不要固定用 A,B,C 开头                                                                                   |
| 示例      | k=2：提示“A 变成 C，B 变成 D”，问“E 变成什么？” → G                                                                           |

---

### L2-5：A=1 映射 + 等差数字，问字母

| 字段      | 内容                                                                                                      |
| ------- | ------------------------------------------------------------------------------------------------------- |
| 模板ID    | L2-5                                                                                                    |
| 规律描述    | 数字部分是等差数列，孩子先找数字规律，再映射成字母                                                                               |
| 参数与生成规则 | 步长 `d ∈ {1,2,3}`；起始数字 `n0 ∈ [1,20]`；长度 `L=4`；数字 seq：`a_n = n0 + (n-1)*d`；限制 `a_L ≤ 26`；答案字母为 `chr(a_L)` |
| 出题形式    | 只展示数字：`5, 8, 11, ?`，提示 A=1 规则，问缺的数字对应字母或者问缺数字本身                                                         |
| 随机化建议   | `n0,d` 每题随机；可以变换问法（有时问数字，有时问最后字母）                                                                       |
| 示例      | `3, 6, 9, ?` → 数字 12，对应 L                                                                               |

---

### L2-6：字母序列 + 对应数字位置双展示

| 字段      | 内容                                                                  |
| ------- | ------------------------------------------------------------------- |
| 模板ID    | L2-6                                                                |
| 规律描述    | 上行字母是一个等差序列，下行数字是对应 `idx(字母)`；缺一项，需要孩子在两个维度上都能理解                    |
| 参数与生成规则 | 用 L1-3 或 L2-1 生成等差字母序列 `X1..XL`；下行数字 `Ni = idx(Xi)`；随机选择一个位置挖空字母或数字 |
| 出题形式    | 例：`上行：C, D, E, ?`；`下行：3, 4, 5, 6`；问上行缺字母                            |
| 随机化建议   | 挖空位置随机；可以灵活切换“挖字母”或“挖数字”；参数同字母序列规则随机                                |
| 示例      | 上: D,E,F,? ; 下:4,5,6,7 → ?=G                                        |

---

## 三、困难难度（L3）模板表

> 核心：**多步位移 / 步长变化 / 双序列叠加 / 需要反向推理或联立**。
> 仍然保持可编程和小学可接受难度，但需要更强逻辑整合。

### L3-1：位移步长也在变化（+1, +2, +3,...）

| 字段      | 内容                                                                                                                                                  |
| ------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| 模板ID    | L3-1                                                                                                                                                |
| 规律描述    | 字母索引的相邻差值本身是等差：+1, +2, +3,…                                                                                                                         |
| 参数与生成规则 | 选长度 `L=5`；随机起点 `s ∈ [1,15]`；差值序列 `d1=1, d2=2, d3=3, d4=4`；构造：`idx1=s; idx2=s+1; idx3=idx2+2; idx4=idx3+3; idx5=idx4+4`，要求所有 idx ≤26；字母为 `chr(idxi)` |
| 出题形式    | 通常缺最后一项，或缺中间一项（需要孩子先找出差值规律）                                                                                                                         |
| 随机化建议   | 起点 s 随机；可以在 UI 中给孩子提示“先看看相邻字母之间隔了几个字母”                                                                                                              |
| 示例      | 起点 C (3)：C(3), D(4), F(6), I(9), M(13), ?（下一步+5 → R）                                                                                                |

---

### L3-2：字母 + 数字双序列，步长也在变

| 字段      | 内容                                                                                                                                   |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| 模板ID    | L3-2                                                                                                                                 |
| 规律描述    | 每项是 (字母, 数字)，两部分各自有不同的“变差”规律                                                                                                         |
| 参数与生成规则 | 例子设计：长度 `L=4`；字母 idx 起点 `p ∈ [1,10]`，差值序列 `[1,2,3]`；数字起点 `n0 ∈ [1,10]`，差值序列 `[2,3,4]`；第2项字母=idx1+1, 第3=+2, 第4=+3；数字类似；确保 idx≤26、数字合理 |
| 出题形式    | 如：`A1, B3, D6, G10, ?`，问下一对（字母+数字）；或只问字母/数字                                                                                          |
| 随机化建议   | 起点和差值模式可多样化（比如 [1,1,2] / [2,2,3] 等）；但要保持“差值越来越大”这种可解释性                                                                               |
| 示例      | 示例上：差字母+1,+2,+3 → A,B,D,G → 下一步 +4 → K；数字+2,+3,+4 → 1,3,6,10 → 下一步 +5 →15 → K15                                                      |

---

### L3-3：交替位移规则（+1, +2 交替）

| 字段      | 内容                                                                                                         |
| ------- | ---------------------------------------------------------------------------------------------------------- |
| 模板ID    | L3-3                                                                                                       |
| 规律描述    | 字母索引的相邻差值在两个值之间交替，例如 +1, +2, +1, +2,...                                                                    |
| 参数与生成规则 | 步长1 `a ∈ {1,2}`, 步长2 `b ∈ {2,3,4}, b≠a`；模式 `[+a, +b]` 循环；选长度 `L=6`，起点 `s` 满足不越界；第2项 idx = s+a，第3=+b，第4=+a… |
| 出题形式    | 通常给 5 项缺第 6 项，或给 6 项缺中间某项；需要识别“交替变动”的步长                                                                    |
| 随机化建议   | `a,b,s` 每次随机；可以视情况控制最大 idx≤26                                                                              |
| 示例      | a=1,b=2, 起点 C：C(3), D(4), F(6), G(7), I(9), ?（下一步 +1 → J）                                                  |

---

### L3-4：未知位移的编码/解码（推导 Caesar 位移）

| 字段      | 内容                                                                                                   |
| ------- | ---------------------------------------------------------------------------------------------------- |
| 模板ID    | L3-4                                                                                                 |
| 规律描述    | 给出几对“原字母→密文字母”，位移 k 不明，让孩子先推 k，再解出另一个字母的映射                                                           |
| 参数与生成规则 | 随机选择位移 `k ∈ {1..5}`；随机选择原字母 `X1,X2,X3`，确保 `idx(Xi)+k ≤26`；密文 `Yi=chr(idx(Xi)+k)`；再额外选一个原字母 `Z`，问它的密文 |
| 出题形式    | 如：“A→D, C→F, E→H，那么 G→?”（位移 k=3）                                                                     |
| 随机化建议   | 每次随机 k 和字母；显示≥2组配对，逻辑清晰                                                                              |
| 示例      | B→E, D→G, F→I，问 H→? → K                                                                              |

---

### L3-5：字母表格（二维）：行列都有规律

| 字段      | 内容                                                                                                                                       |
| ------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| 模板ID    | L3-5                                                                                                                                     |
| 规律描述    | 3×3 字母表格，行和列各自构成等差字母序列（可视为二维等差）                                                                                                          |
| 参数与生成规则 | 方案一（简单实现）：先用 L1-1/3 生成第一行：`R1C1,R1C2,R1C3` 为等差字母（idx加 dH）；再对每一列用一个竖直步长 dV（可以统一 dV）向下生成：`R2Cj = R1Cj + dV`，`R3Cj = R2Cj + dV`；要求所有 idx≤26 |
| 出题形式    | 随机挖一个格子为 `?`，孩子需要同时利用“行方向”和“列方向”的变化来推断                                                                                                   |
| 随机化建议   | 随机水平步长 dH ∈ {1,2}，垂直步长 dV ∈ {1,2}；随机起点 `idx(R1C1)`；挖空位置随机                                                                                |
| 示例      | 第一行：A,B,C (dH=1)；垂直 dV=2 → 第二行 C,D,E；第三行 E,F,G；若挖 R3C3：? → G                                                                             |

---

### L3-6：字母 ↔ 数字的“线性关系”编码

| 字段      | 内容                                                                                                           |
| ------- | ------------------------------------------------------------------------------------------------------------ |
| 模板ID    | L3-6                                                                                                         |
| 规律描述    | 数字不是简单的 idx，而是与 idx 有一个线性关系，比如 `number = idx(letter) + c` 或 `2*idx(letter)`                                  |
| 参数与生成规则 | 选简单线性关系之一： ① `N = idx(L) + c`（c ∈ {-3..3, ≠0}`） 或 ② `N = 2*idx(L)`；随机选若干字母，算出对应 N，给出几对示例；再给一个字母问对应数字，或给数字问字母 |
| 出题形式    | 如：`A→3, B→4, C→5，则 E→?` （这里 c=2）；或 `C→6, F→12, H→16，问 G→?`                                                   |
| 随机化建议   | 每题随机选择关系类型和参数 c；字母选择要保证数字不太大（<100）；题干可以不直说关系，让孩子自己发现                                                         |
| 示例      | 设 N=idx+1：A→2, C→4, E→6，问 G→? → 8                                                                            |

---

## 四、统一随机化与防“背题”策略（类型3）

和前两类保持一致，你在题目引擎里可以统一做这些事情：

1. **模板 + 随机参数**

   * 每道字母题都来自某个模板（Lx-y），并带有参数（起始索引、步长、位移 k、偏移 c 等）。
   * 只要参数每次随机，孩子再碰到“相同形状”的题时，字母序列也会不同。

2. **限制范围 + 重抽**

   * 生成过程中若出现：

     * 索引 <1 或 >26
     * 计算出非整数 / 数字太大
       → 就丢弃本次参数，重新随机。

3. **随机缺失位置**

   * 在模板允许的范围内，随机选择“挖空”的位置（多为最后一项，也可以是中间项、配对中的字母或数字）。
   * 这样即使起点和步长恰好重复，以前答过的题也会变成新形式。

4. **避免短时间重复同一“模板 + 参数 + 缺失位置”组合**

   * 可以维护一个“小黑名单”，记录最近 N 道题的三元组 `(模板ID, 参数集合, 缺失位置)`，生成新题时尽量避开。

